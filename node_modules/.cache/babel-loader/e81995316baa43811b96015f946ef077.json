{"ast":null,"code":"function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport * as d3Shape from \"victory-vendor/d3-shape\";\nimport { circle, point } from \"./geometry-helper-methods\";\n\nvar getPosition = function (props, width) {\n  var x = props.x,\n      x0 = props.x0,\n      y = props.y,\n      y0 = props.y0,\n      horizontal = props.horizontal;\n  var alignment = props.alignment || \"middle\";\n  var size = alignment === \"middle\" ? width / 2 : width;\n  var sign = horizontal ? -1 : 1;\n\n  if (horizontal) {\n    return {\n      x0: x0,\n      x1: x,\n      y0: alignment === \"start\" ? y : y - sign * size,\n      y1: alignment === \"end\" ? y : y + sign * size\n    };\n  }\n\n  return {\n    x0: alignment === \"start\" ? x : x - sign * size,\n    x1: alignment === \"end\" ? x : x + sign * size,\n    y0: y0,\n    y1: y\n  };\n};\n\nvar getAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale;\n  var x = data[index]._x1 === undefined ? \"_x\" : \"_x1\";\n  return scale.x(data[index][x]);\n};\n\nvar getAngularWidth = function (props, width) {\n  var scale = props.scale;\n  var range = scale.y.range();\n  var r = Math.max.apply(Math, _toConsumableArray(range));\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  return width / (2 * Math.PI * r) * angularRange;\n};\n\nvar transformAngle = function (angle) {\n  return -1 * angle + Math.PI / 2;\n};\n\nexport var getCustomBarPath = function (props, width) {\n  var getPath = props.getPath;\n\n  var propsWithCalculatedValues = _objectSpread(_objectSpread({}, props), getPosition(props, width));\n\n  return getPath(propsWithCalculatedValues);\n};\n\nvar getStartAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale,\n      alignment = props.alignment;\n  var currentAngle = getAngle(props, index);\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  var previousAngle = index === 0 ? getAngle(props, data.length - 1) - Math.PI * 2 : getAngle(props, index - 1);\n\n  if (index === 0 && angularRange < 2 * Math.PI) {\n    return scale.x.range()[0];\n  } else if (alignment === \"start\" || alignment === \"end\") {\n    return alignment === \"start\" ? previousAngle : currentAngle;\n  } else {\n    return (currentAngle + previousAngle) / 2;\n  }\n};\n\nvar getEndAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale,\n      alignment = props.alignment;\n  var currentAngle = getAngle(props, index);\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  var lastAngle = scale.x.range()[1] === 2 * Math.PI ? getAngle(props, 0) + Math.PI * 2 : scale.x.range()[1];\n  var nextAngle = index === data.length - 1 ? getAngle(props, 0) + Math.PI * 2 : getAngle(props, index + 1);\n\n  if (index === data.length - 1 && angularRange < 2 * Math.PI) {\n    return lastAngle;\n  } else if (alignment === \"start\" || alignment === \"end\") {\n    return alignment === \"start\" ? currentAngle : nextAngle;\n  } else {\n    return (currentAngle + nextAngle) / 2;\n  }\n};\n\nvar mapPointsToPath = function (coords, cornerRadius, direction) {\n  var topLeftPath = \"\".concat(cornerRadius.topLeft, \" \").concat(cornerRadius.topLeft, \" \").concat(direction);\n  var topRightPath = \"\".concat(cornerRadius.topRight, \" \").concat(cornerRadius.topRight, \" \").concat(direction);\n  var bottomLeftPath = \"\".concat(cornerRadius.bottomLeft, \" \").concat(cornerRadius.bottomLeft, \" \").concat(direction);\n  var bottomRightPath = \"\".concat(cornerRadius.bottomRight, \" \").concat(cornerRadius.bottomRight, \" \").concat(direction);\n  var commands = [\"M\", \"A \".concat(bottomLeftPath, \",\"), \"L\", \"A \".concat(topLeftPath, \",\"), \"L\", \"A \".concat(topRightPath, \",\"), \"L\", \"A \".concat(bottomRightPath, \",\")];\n  var path = commands.reduce(function (acc, command, i) {\n    acc += \"\".concat(command, \" \").concat(coords[i].x, \", \").concat(coords[i].y, \" \\n\");\n    return acc;\n  }, \"\");\n  return \"\".concat(path, \" z\");\n};\n\nvar getVerticalBarPoints = function (position, sign, cr) {\n  var x0 = position.x0,\n      x1 = position.x1,\n      y0 = position.y0,\n      y1 = position.y1; // eslint-disable-next-line max-statements, max-len\n\n  var getHalfPoints = function (side) {\n    var isLeft = side === \"Left\";\n    var signL = isLeft ? 1 : -1;\n    var x = isLeft ? x0 : x1;\n    var bottomPoint = {\n      x: x + signL * cr[\"bottom\".concat(side)],\n      y: y0\n    };\n    var bottomMiddlePoint = {\n      x: x,\n      y: y0 - sign * cr[\"bottom\".concat(side)]\n    };\n    var topMiddlePoint = {\n      x: x,\n      y: y1 + sign * cr[\"top\".concat(side)]\n    };\n    var topPoint = {\n      x: x + signL * cr[\"top\".concat(side)],\n      y: y1\n    };\n    var hasIntersection = sign === 1 ? y0 - cr[\"bottom\".concat(side)] < y1 + cr[\"top\".concat(side)] : y0 + cr[\"bottom\".concat(side)] > y1 - cr[\"top\".concat(side)];\n\n    if (hasIntersection) {\n      var topCenter = point(x + signL * cr[\"top\".concat(side)], y1 + sign * cr[\"top\".concat(side)]);\n      var topCircle = circle(topCenter, cr[\"top\".concat(side)]);\n      var bottomCenter = point(x + signL * cr[\"bottom\".concat(side)], y0 - sign * cr[\"bottom\".concat(side)]);\n      var bottomCircle = circle(bottomCenter, cr[\"bottom\".concat(side)]);\n      var circleIntersection = topCircle.intersection(bottomCircle);\n      var hasArcIntersection = circleIntersection.length > 0;\n\n      if (hasArcIntersection) {\n        var arcIntersection = circleIntersection[isLeft ? 0 : 1];\n        bottomMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n        topMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n      } else {\n        var hasBottomLineTopArcIntersection = cr[\"top\".concat(side)] > cr[\"bottom\".concat(side)];\n\n        if (hasBottomLineTopArcIntersection) {\n          var newX = topCircle.solveX(y0)[isLeft ? 0 : 1];\n          bottomPoint = {\n            x: newX,\n            y: y0\n          };\n          bottomMiddlePoint = {\n            x: newX,\n            y: y0\n          };\n          topMiddlePoint = {\n            x: newX,\n            y: y0\n          };\n        } else {\n          var _newX = bottomCircle.solveX(y1)[isLeft ? 0 : 1];\n          bottomMiddlePoint = {\n            x: _newX,\n            y: y1\n          };\n          topMiddlePoint = {\n            x: _newX,\n            y: y1\n          };\n          topPoint = {\n            x: _newX,\n            y: y1\n          };\n        }\n      }\n    }\n\n    var points = [bottomPoint, bottomMiddlePoint, topMiddlePoint, topPoint];\n    return isLeft ? points : points.reverse();\n  };\n\n  return getHalfPoints(\"Left\").concat(getHalfPoints(\"Right\"));\n};\n\nvar getHorizontalBarPoints = function (position, sign, cr) {\n  var y0 = position.y0,\n      y1 = position.y1;\n  var x0 = position.x0 < position.x1 ? position.x0 : position.x1;\n  var x1 = position.x0 < position.x1 ? position.x1 : position.x0; // eslint-disable-next-line max-statements, max-len\n\n  var getHalfPoints = function (side) {\n    var isTop = side === \"top\";\n    var signL = isTop ? -1 : 1;\n    var y = isTop ? y1 : y0;\n    var leftPoint = {\n      x: x0,\n      y: y - signL * cr[\"\".concat(side, \"Left\")]\n    };\n    var leftMiddlePoint = {\n      x: x0 + cr[\"\".concat(side, \"Left\")],\n      y: y\n    };\n    var rightMiddlePoint = {\n      x: x1 - cr[\"\".concat(side, \"Right\")],\n      y: y\n    };\n    var rightPoint = {\n      x: x1,\n      y: y - signL * cr[\"\".concat(side, \"Right\")]\n    };\n    var hasIntersection = leftMiddlePoint.x > rightMiddlePoint.x;\n\n    if (hasIntersection) {\n      var leftCenter = point(x0 + cr[\"\".concat(side, \"Left\")], y - signL * cr[\"\".concat(side, \"Left\")]);\n      var leftCircle = circle(leftCenter, cr[\"\".concat(side, \"Left\")]);\n      var rightCenter = point(x1 - cr[\"\".concat(side, \"Right\")], y - signL * cr[\"\".concat(side, \"Right\")]);\n      var rightCircle = circle(rightCenter, cr[\"\".concat(side, \"Right\")]);\n      var circleIntersection = leftCircle.intersection(rightCircle);\n      var hasArcIntersection = circleIntersection.length > 0;\n\n      if (hasArcIntersection) {\n        var arcIntersection = circleIntersection[sign > 0 ? 1 : 0];\n        leftMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n        rightMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n      } else {\n        var hasLeftLineRightArcIntersection = cr[\"\".concat(side, \"Right\")] > cr[\"\".concat(side, \"Left\")];\n\n        if (hasLeftLineRightArcIntersection) {\n          var newY = rightCircle.solveY(x0)[isTop ? 0 : 1];\n          leftPoint = {\n            x: x0,\n            y: newY\n          };\n          leftMiddlePoint = {\n            x: x0,\n            y: newY\n          };\n          rightMiddlePoint = {\n            x: x0,\n            y: newY\n          };\n        } else {\n          var _newY = leftCircle.solveY(x1)[isTop ? 0 : 1];\n          rightPoint = {\n            x: x1,\n            y: _newY\n          };\n          rightMiddlePoint = {\n            x: x1,\n            y: _newY\n          };\n          leftMiddlePoint = {\n            x: x1,\n            y: _newY\n          };\n        }\n      }\n    }\n\n    return [leftPoint, leftMiddlePoint, rightMiddlePoint, rightPoint];\n  };\n\n  var topPoints = getHalfPoints(\"top\");\n  var bottomPoints = getHalfPoints(\"bottom\");\n  return [bottomPoints[1], bottomPoints[0]].concat(_toConsumableArray(topPoints), [// eslint-disable-next-line no-magic-numbers\n  bottomPoints[3], bottomPoints[2]]);\n}; // eslint-disable-next-line max-params\n\n\nexport var getVerticalBarPath = function (props, width, cornerRadius) {\n  var position = getPosition(props, width);\n  var sign = position.y0 > position.y1 ? 1 : -1;\n  var direction = sign > 0 ? \"0 0 1\" : \"0 0 0\";\n  var points = getVerticalBarPoints(position, sign, cornerRadius);\n  return mapPointsToPath(points, cornerRadius, direction);\n}; // eslint-disable-next-line max-params\n\nexport var getHorizontalBarPath = function (props, width, cornerRadius) {\n  var position = getPosition(props, width);\n  var sign = position.x0 < position.x1 ? 1 : -1;\n  var direction = \"0 0 1\";\n  var cr = {\n    topRight: sign > 0 ? cornerRadius.topLeft : cornerRadius.bottomLeft,\n    bottomRight: sign > 0 ? cornerRadius.topRight : cornerRadius.bottomRight,\n    bottomLeft: sign > 0 ? cornerRadius.bottomRight : cornerRadius.topRight,\n    topLeft: sign > 0 ? cornerRadius.bottomLeft : cornerRadius.topLeft\n  };\n  var points = getHorizontalBarPoints(position, sign, cr);\n  return mapPointsToPath(points, cr, direction);\n};\nexport var getVerticalPolarBarPath = function (props, cornerRadius) {\n  var datum = props.datum,\n      scale = props.scale,\n      index = props.index,\n      alignment = props.alignment,\n      style = props.style;\n  var r1 = scale.y(datum._y0 || 0);\n  var r2 = scale.y(datum._y1 !== undefined ? datum._y1 : datum._y);\n  var currentAngle = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n  var start;\n  var end;\n\n  if (style.width) {\n    var width = getAngularWidth(props, style.width);\n    var size = alignment === \"middle\" ? width / 2 : width;\n    start = alignment === \"start\" ? currentAngle : currentAngle - size;\n    end = alignment === \"end\" ? currentAngle : currentAngle + size;\n  } else {\n    start = getStartAngle(props, index);\n    end = getEndAngle(props, index);\n  }\n\n  var getPath = function (edge) {\n    var pathFunction = d3Shape.arc().innerRadius(r1).outerRadius(r2).startAngle(transformAngle(start)).endAngle(transformAngle(end)).cornerRadius(cornerRadius[edge]);\n    return pathFunction();\n  };\n\n  var getPathData = function (edge) {\n    var rightPath = getPath(\"\".concat(edge, \"Right\"));\n    var rightMoves = rightPath.match(/[A-Z]/g);\n    var rightCoords = rightPath.split(/[A-Z]/).slice(1);\n    var rightMiddle = rightMoves.indexOf(\"L\");\n    var leftPath = getPath(\"\".concat(edge, \"Left\"));\n    var leftMoves = leftPath.match(/[A-Z]/g);\n    var leftCoords = leftPath.split(/[A-Z]/).slice(1);\n    var leftMiddle = leftMoves.indexOf(\"L\");\n    return {\n      rightMoves: rightMoves,\n      rightCoords: rightCoords,\n      rightMiddle: rightMiddle,\n      leftMoves: leftMoves,\n      leftCoords: leftCoords,\n      leftMiddle: leftMiddle\n    };\n  }; // eslint-disable-next-line max-statements\n\n\n  var getTopPath = function () {\n    var topRight = cornerRadius.topRight,\n        topLeft = cornerRadius.topLeft;\n    var arcLength = r2 * Math.abs(end - start);\n\n    var _getPathData = getPathData(\"top\"),\n        rightMoves = _getPathData.rightMoves,\n        rightCoords = _getPathData.rightCoords,\n        rightMiddle = _getPathData.rightMiddle,\n        leftMoves = _getPathData.leftMoves,\n        leftCoords = _getPathData.leftCoords,\n        leftMiddle = _getPathData.leftMiddle;\n\n    var moves;\n    var coords;\n\n    if (topRight === topLeft || arcLength < 2 * topRight + 2 * topLeft) {\n      moves = topRight > topLeft ? rightMoves : leftMoves;\n      coords = topRight > topLeft ? rightCoords : leftCoords;\n    } else {\n      // eslint-disable-next-line no-magic-numbers\n      var isShort = function (middle) {\n        return middle < 3;\n      };\n\n      var rightOffset = topLeft > topRight && isShort(rightMiddle) ? 1 : 2;\n      var leftOffset;\n\n      if (topRight > topLeft) {\n        var defaultOffset = isShort(rightMiddle) ? leftMiddle : leftMiddle - 2;\n        leftOffset = isShort(leftMiddle) ? leftMiddle - 1 : defaultOffset;\n      } else {\n        var _defaultOffset = isShort(leftMiddle) ? 1 : 2;\n\n        leftOffset = isShort(rightMiddle) ? _defaultOffset : leftMiddle - 2;\n      }\n\n      moves = [].concat(_toConsumableArray(rightMoves.slice(0, rightOffset)), _toConsumableArray(leftMoves.slice(leftOffset)));\n      coords = [].concat(_toConsumableArray(rightCoords.slice(0, rightOffset)), _toConsumableArray(leftCoords.slice(leftOffset)));\n    }\n\n    var middle = moves.indexOf(\"L\");\n    var subMoves = moves.slice(0, middle);\n    var subCoords = coords.slice(0, middle);\n    return subMoves.map(function (m, i) {\n      return {\n        command: m,\n        coords: subCoords[i].split(\",\")\n      };\n    });\n  }; // eslint-disable-next-line max-statements\n\n\n  var getBottomPath = function () {\n    var bottomRight = cornerRadius.bottomRight,\n        bottomLeft = cornerRadius.bottomLeft;\n    var arcLength = r1 * Math.abs(end - start);\n\n    var _getPathData2 = getPathData(\"bottom\"),\n        rightMoves = _getPathData2.rightMoves,\n        rightCoords = _getPathData2.rightCoords,\n        rightMiddle = _getPathData2.rightMiddle,\n        leftMoves = _getPathData2.leftMoves,\n        leftCoords = _getPathData2.leftCoords,\n        leftMiddle = _getPathData2.leftMiddle;\n\n    var moves;\n    var coords;\n\n    if (bottomRight === bottomLeft || arcLength < 2 * bottomRight + 2 * bottomLeft) {\n      moves = bottomRight > bottomLeft ? rightMoves : leftMoves;\n      coords = bottomRight > bottomLeft ? rightCoords : leftCoords;\n    } else {\n      // eslint-disable-next-line no-magic-numbers\n      var isShort = function (m, middle) {\n        return m.length - middle < 4;\n      };\n\n      var shortPath = bottomRight > bottomLeft ? isShort(rightMoves, rightMiddle) : isShort(leftMoves, leftMiddle); // eslint-disable-next-line no-magic-numbers\n\n      var rightOffset = shortPath ? -1 : -3;\n      moves = [].concat(_toConsumableArray(leftMoves.slice(0, leftMiddle + 2)), _toConsumableArray(rightMoves.slice(rightOffset)));\n      coords = [].concat(_toConsumableArray(leftCoords.slice(0, leftMiddle + 2)), _toConsumableArray(rightCoords.slice(rightOffset)));\n    }\n\n    var middle = moves.indexOf(\"L\");\n    var subMoves = moves.slice(middle, -1);\n    var subCoords = coords.slice(middle, -1);\n    return subMoves.map(function (m, i) {\n      return {\n        command: m,\n        coords: subCoords[i].split(\",\")\n      };\n    });\n  };\n\n  var topPath = getTopPath();\n  var bottomPath = getBottomPath();\n  var moves = [].concat(_toConsumableArray(topPath), _toConsumableArray(bottomPath));\n  var path = moves.reduce(function (memo, move) {\n    memo += \"\".concat(move.command, \" \").concat(move.coords.join());\n    return memo;\n  }, \"\");\n  return \"\".concat(path, \" z\");\n};\nexport var getBarPath = function (props, width, cornerRadius) {\n  if (props.getPath) {\n    return getCustomBarPath(props, width);\n  }\n\n  return props.horizontal ? getHorizontalBarPath(props, width, cornerRadius) : getVerticalBarPath(props, width, cornerRadius);\n};\nexport var getPolarBarPath = function (props, cornerRadius) {\n  // TODO Radial bars\n  return getVerticalPolarBarPath(props, cornerRadius);\n};","map":{"version":3,"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","arr2","d3Shape","circle","point","getPosition","props","width","x","x0","y","y0","horizontal","alignment","size","sign","x1","y1","getAngle","index","data","scale","_x1","undefined","getAngularWidth","range","r","Math","max","angularRange","abs","PI","transformAngle","angle","getCustomBarPath","getPath","propsWithCalculatedValues","getStartAngle","currentAngle","previousAngle","getEndAngle","lastAngle","nextAngle","mapPointsToPath","coords","cornerRadius","direction","topLeftPath","concat","topLeft","topRightPath","topRight","bottomLeftPath","bottomLeft","bottomRightPath","bottomRight","commands","path","reduce","acc","command","getVerticalBarPoints","position","cr","getHalfPoints","side","isLeft","signL","bottomPoint","bottomMiddlePoint","topMiddlePoint","topPoint","hasIntersection","topCenter","topCircle","bottomCenter","bottomCircle","circleIntersection","intersection","hasArcIntersection","arcIntersection","hasBottomLineTopArcIntersection","newX","solveX","_newX","points","reverse","getHorizontalBarPoints","isTop","leftPoint","leftMiddlePoint","rightMiddlePoint","rightPoint","leftCenter","leftCircle","rightCenter","rightCircle","hasLeftLineRightArcIntersection","newY","solveY","_newY","topPoints","bottomPoints","getVerticalBarPath","getHorizontalBarPath","getVerticalPolarBarPath","datum","style","r1","_y0","r2","_y1","_y","_x","start","end","edge","pathFunction","arc","innerRadius","outerRadius","startAngle","endAngle","getPathData","rightPath","rightMoves","match","rightCoords","split","rightMiddle","indexOf","leftPath","leftMoves","leftCoords","leftMiddle","getTopPath","arcLength","_getPathData","moves","isShort","middle","rightOffset","leftOffset","defaultOffset","_defaultOffset","subMoves","subCoords","map","m","getBottomPath","_getPathData2","shortPath","topPath","bottomPath","memo","move","join","getBarPath","getPolarBarPath"],"sources":["/Users/leonardogomes/Documents/atlas/atlas/node_modules/victory-bar/es/path-helper-methods.js"],"sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as d3Shape from \"victory-vendor/d3-shape\";\nimport { circle, point } from \"./geometry-helper-methods\";\n\nvar getPosition = function (props, width) {\n  var x = props.x,\n      x0 = props.x0,\n      y = props.y,\n      y0 = props.y0,\n      horizontal = props.horizontal;\n  var alignment = props.alignment || \"middle\";\n  var size = alignment === \"middle\" ? width / 2 : width;\n  var sign = horizontal ? -1 : 1;\n\n  if (horizontal) {\n    return {\n      x0: x0,\n      x1: x,\n      y0: alignment === \"start\" ? y : y - sign * size,\n      y1: alignment === \"end\" ? y : y + sign * size\n    };\n  }\n\n  return {\n    x0: alignment === \"start\" ? x : x - sign * size,\n    x1: alignment === \"end\" ? x : x + sign * size,\n    y0: y0,\n    y1: y\n  };\n};\n\nvar getAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale;\n  var x = data[index]._x1 === undefined ? \"_x\" : \"_x1\";\n  return scale.x(data[index][x]);\n};\n\nvar getAngularWidth = function (props, width) {\n  var scale = props.scale;\n  var range = scale.y.range();\n  var r = Math.max.apply(Math, _toConsumableArray(range));\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  return width / (2 * Math.PI * r) * angularRange;\n};\n\nvar transformAngle = function (angle) {\n  return -1 * angle + Math.PI / 2;\n};\n\nexport var getCustomBarPath = function (props, width) {\n  var getPath = props.getPath;\n\n  var propsWithCalculatedValues = _objectSpread(_objectSpread({}, props), getPosition(props, width));\n\n  return getPath(propsWithCalculatedValues);\n};\n\nvar getStartAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale,\n      alignment = props.alignment;\n  var currentAngle = getAngle(props, index);\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  var previousAngle = index === 0 ? getAngle(props, data.length - 1) - Math.PI * 2 : getAngle(props, index - 1);\n\n  if (index === 0 && angularRange < 2 * Math.PI) {\n    return scale.x.range()[0];\n  } else if (alignment === \"start\" || alignment === \"end\") {\n    return alignment === \"start\" ? previousAngle : currentAngle;\n  } else {\n    return (currentAngle + previousAngle) / 2;\n  }\n};\n\nvar getEndAngle = function (props, index) {\n  var data = props.data,\n      scale = props.scale,\n      alignment = props.alignment;\n  var currentAngle = getAngle(props, index);\n  var angularRange = Math.abs(scale.x.range()[1] - scale.x.range()[0]);\n  var lastAngle = scale.x.range()[1] === 2 * Math.PI ? getAngle(props, 0) + Math.PI * 2 : scale.x.range()[1];\n  var nextAngle = index === data.length - 1 ? getAngle(props, 0) + Math.PI * 2 : getAngle(props, index + 1);\n\n  if (index === data.length - 1 && angularRange < 2 * Math.PI) {\n    return lastAngle;\n  } else if (alignment === \"start\" || alignment === \"end\") {\n    return alignment === \"start\" ? currentAngle : nextAngle;\n  } else {\n    return (currentAngle + nextAngle) / 2;\n  }\n};\n\nvar mapPointsToPath = function (coords, cornerRadius, direction) {\n  var topLeftPath = \"\".concat(cornerRadius.topLeft, \" \").concat(cornerRadius.topLeft, \" \").concat(direction);\n  var topRightPath = \"\".concat(cornerRadius.topRight, \" \").concat(cornerRadius.topRight, \" \").concat(direction);\n  var bottomLeftPath = \"\".concat(cornerRadius.bottomLeft, \" \").concat(cornerRadius.bottomLeft, \" \").concat(direction);\n  var bottomRightPath = \"\".concat(cornerRadius.bottomRight, \" \").concat(cornerRadius.bottomRight, \" \").concat(direction);\n  var commands = [\"M\", \"A \".concat(bottomLeftPath, \",\"), \"L\", \"A \".concat(topLeftPath, \",\"), \"L\", \"A \".concat(topRightPath, \",\"), \"L\", \"A \".concat(bottomRightPath, \",\")];\n  var path = commands.reduce(function (acc, command, i) {\n    acc += \"\".concat(command, \" \").concat(coords[i].x, \", \").concat(coords[i].y, \" \\n\");\n    return acc;\n  }, \"\");\n  return \"\".concat(path, \" z\");\n};\n\nvar getVerticalBarPoints = function (position, sign, cr) {\n  var x0 = position.x0,\n      x1 = position.x1,\n      y0 = position.y0,\n      y1 = position.y1; // eslint-disable-next-line max-statements, max-len\n\n  var getHalfPoints = function (side) {\n    var isLeft = side === \"Left\";\n    var signL = isLeft ? 1 : -1;\n    var x = isLeft ? x0 : x1;\n    var bottomPoint = {\n      x: x + signL * cr[\"bottom\".concat(side)],\n      y: y0\n    };\n    var bottomMiddlePoint = {\n      x: x,\n      y: y0 - sign * cr[\"bottom\".concat(side)]\n    };\n    var topMiddlePoint = {\n      x: x,\n      y: y1 + sign * cr[\"top\".concat(side)]\n    };\n    var topPoint = {\n      x: x + signL * cr[\"top\".concat(side)],\n      y: y1\n    };\n    var hasIntersection = sign === 1 ? y0 - cr[\"bottom\".concat(side)] < y1 + cr[\"top\".concat(side)] : y0 + cr[\"bottom\".concat(side)] > y1 - cr[\"top\".concat(side)];\n\n    if (hasIntersection) {\n      var topCenter = point(x + signL * cr[\"top\".concat(side)], y1 + sign * cr[\"top\".concat(side)]);\n      var topCircle = circle(topCenter, cr[\"top\".concat(side)]);\n      var bottomCenter = point(x + signL * cr[\"bottom\".concat(side)], y0 - sign * cr[\"bottom\".concat(side)]);\n      var bottomCircle = circle(bottomCenter, cr[\"bottom\".concat(side)]);\n      var circleIntersection = topCircle.intersection(bottomCircle);\n      var hasArcIntersection = circleIntersection.length > 0;\n\n      if (hasArcIntersection) {\n        var arcIntersection = circleIntersection[isLeft ? 0 : 1];\n        bottomMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n        topMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n      } else {\n        var hasBottomLineTopArcIntersection = cr[\"top\".concat(side)] > cr[\"bottom\".concat(side)];\n\n        if (hasBottomLineTopArcIntersection) {\n          var newX = topCircle.solveX(y0)[isLeft ? 0 : 1];\n          bottomPoint = {\n            x: newX,\n            y: y0\n          };\n          bottomMiddlePoint = {\n            x: newX,\n            y: y0\n          };\n          topMiddlePoint = {\n            x: newX,\n            y: y0\n          };\n        } else {\n          var _newX = bottomCircle.solveX(y1)[isLeft ? 0 : 1];\n          bottomMiddlePoint = {\n            x: _newX,\n            y: y1\n          };\n          topMiddlePoint = {\n            x: _newX,\n            y: y1\n          };\n          topPoint = {\n            x: _newX,\n            y: y1\n          };\n        }\n      }\n    }\n\n    var points = [bottomPoint, bottomMiddlePoint, topMiddlePoint, topPoint];\n    return isLeft ? points : points.reverse();\n  };\n\n  return getHalfPoints(\"Left\").concat(getHalfPoints(\"Right\"));\n};\n\nvar getHorizontalBarPoints = function (position, sign, cr) {\n  var y0 = position.y0,\n      y1 = position.y1;\n  var x0 = position.x0 < position.x1 ? position.x0 : position.x1;\n  var x1 = position.x0 < position.x1 ? position.x1 : position.x0; // eslint-disable-next-line max-statements, max-len\n\n  var getHalfPoints = function (side) {\n    var isTop = side === \"top\";\n    var signL = isTop ? -1 : 1;\n    var y = isTop ? y1 : y0;\n    var leftPoint = {\n      x: x0,\n      y: y - signL * cr[\"\".concat(side, \"Left\")]\n    };\n    var leftMiddlePoint = {\n      x: x0 + cr[\"\".concat(side, \"Left\")],\n      y: y\n    };\n    var rightMiddlePoint = {\n      x: x1 - cr[\"\".concat(side, \"Right\")],\n      y: y\n    };\n    var rightPoint = {\n      x: x1,\n      y: y - signL * cr[\"\".concat(side, \"Right\")]\n    };\n    var hasIntersection = leftMiddlePoint.x > rightMiddlePoint.x;\n\n    if (hasIntersection) {\n      var leftCenter = point(x0 + cr[\"\".concat(side, \"Left\")], y - signL * cr[\"\".concat(side, \"Left\")]);\n      var leftCircle = circle(leftCenter, cr[\"\".concat(side, \"Left\")]);\n      var rightCenter = point(x1 - cr[\"\".concat(side, \"Right\")], y - signL * cr[\"\".concat(side, \"Right\")]);\n      var rightCircle = circle(rightCenter, cr[\"\".concat(side, \"Right\")]);\n      var circleIntersection = leftCircle.intersection(rightCircle);\n      var hasArcIntersection = circleIntersection.length > 0;\n\n      if (hasArcIntersection) {\n        var arcIntersection = circleIntersection[sign > 0 ? 1 : 0];\n        leftMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n        rightMiddlePoint = {\n          x: arcIntersection.x,\n          y: arcIntersection.y\n        };\n      } else {\n        var hasLeftLineRightArcIntersection = cr[\"\".concat(side, \"Right\")] > cr[\"\".concat(side, \"Left\")];\n\n        if (hasLeftLineRightArcIntersection) {\n          var newY = rightCircle.solveY(x0)[isTop ? 0 : 1];\n          leftPoint = {\n            x: x0,\n            y: newY\n          };\n          leftMiddlePoint = {\n            x: x0,\n            y: newY\n          };\n          rightMiddlePoint = {\n            x: x0,\n            y: newY\n          };\n        } else {\n          var _newY = leftCircle.solveY(x1)[isTop ? 0 : 1];\n          rightPoint = {\n            x: x1,\n            y: _newY\n          };\n          rightMiddlePoint = {\n            x: x1,\n            y: _newY\n          };\n          leftMiddlePoint = {\n            x: x1,\n            y: _newY\n          };\n        }\n      }\n    }\n\n    return [leftPoint, leftMiddlePoint, rightMiddlePoint, rightPoint];\n  };\n\n  var topPoints = getHalfPoints(\"top\");\n  var bottomPoints = getHalfPoints(\"bottom\");\n  return [bottomPoints[1], bottomPoints[0]].concat(_toConsumableArray(topPoints), [// eslint-disable-next-line no-magic-numbers\n  bottomPoints[3], bottomPoints[2]]);\n}; // eslint-disable-next-line max-params\n\n\nexport var getVerticalBarPath = function (props, width, cornerRadius) {\n  var position = getPosition(props, width);\n  var sign = position.y0 > position.y1 ? 1 : -1;\n  var direction = sign > 0 ? \"0 0 1\" : \"0 0 0\";\n  var points = getVerticalBarPoints(position, sign, cornerRadius);\n  return mapPointsToPath(points, cornerRadius, direction);\n}; // eslint-disable-next-line max-params\n\nexport var getHorizontalBarPath = function (props, width, cornerRadius) {\n  var position = getPosition(props, width);\n  var sign = position.x0 < position.x1 ? 1 : -1;\n  var direction = \"0 0 1\";\n  var cr = {\n    topRight: sign > 0 ? cornerRadius.topLeft : cornerRadius.bottomLeft,\n    bottomRight: sign > 0 ? cornerRadius.topRight : cornerRadius.bottomRight,\n    bottomLeft: sign > 0 ? cornerRadius.bottomRight : cornerRadius.topRight,\n    topLeft: sign > 0 ? cornerRadius.bottomLeft : cornerRadius.topLeft\n  };\n  var points = getHorizontalBarPoints(position, sign, cr);\n  return mapPointsToPath(points, cr, direction);\n};\nexport var getVerticalPolarBarPath = function (props, cornerRadius) {\n  var datum = props.datum,\n      scale = props.scale,\n      index = props.index,\n      alignment = props.alignment,\n      style = props.style;\n  var r1 = scale.y(datum._y0 || 0);\n  var r2 = scale.y(datum._y1 !== undefined ? datum._y1 : datum._y);\n  var currentAngle = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n  var start;\n  var end;\n\n  if (style.width) {\n    var width = getAngularWidth(props, style.width);\n    var size = alignment === \"middle\" ? width / 2 : width;\n    start = alignment === \"start\" ? currentAngle : currentAngle - size;\n    end = alignment === \"end\" ? currentAngle : currentAngle + size;\n  } else {\n    start = getStartAngle(props, index);\n    end = getEndAngle(props, index);\n  }\n\n  var getPath = function (edge) {\n    var pathFunction = d3Shape.arc().innerRadius(r1).outerRadius(r2).startAngle(transformAngle(start)).endAngle(transformAngle(end)).cornerRadius(cornerRadius[edge]);\n    return pathFunction();\n  };\n\n  var getPathData = function (edge) {\n    var rightPath = getPath(\"\".concat(edge, \"Right\"));\n    var rightMoves = rightPath.match(/[A-Z]/g);\n    var rightCoords = rightPath.split(/[A-Z]/).slice(1);\n    var rightMiddle = rightMoves.indexOf(\"L\");\n    var leftPath = getPath(\"\".concat(edge, \"Left\"));\n    var leftMoves = leftPath.match(/[A-Z]/g);\n    var leftCoords = leftPath.split(/[A-Z]/).slice(1);\n    var leftMiddle = leftMoves.indexOf(\"L\");\n    return {\n      rightMoves: rightMoves,\n      rightCoords: rightCoords,\n      rightMiddle: rightMiddle,\n      leftMoves: leftMoves,\n      leftCoords: leftCoords,\n      leftMiddle: leftMiddle\n    };\n  }; // eslint-disable-next-line max-statements\n\n\n  var getTopPath = function () {\n    var topRight = cornerRadius.topRight,\n        topLeft = cornerRadius.topLeft;\n    var arcLength = r2 * Math.abs(end - start);\n\n    var _getPathData = getPathData(\"top\"),\n        rightMoves = _getPathData.rightMoves,\n        rightCoords = _getPathData.rightCoords,\n        rightMiddle = _getPathData.rightMiddle,\n        leftMoves = _getPathData.leftMoves,\n        leftCoords = _getPathData.leftCoords,\n        leftMiddle = _getPathData.leftMiddle;\n\n    var moves;\n    var coords;\n\n    if (topRight === topLeft || arcLength < 2 * topRight + 2 * topLeft) {\n      moves = topRight > topLeft ? rightMoves : leftMoves;\n      coords = topRight > topLeft ? rightCoords : leftCoords;\n    } else {\n      // eslint-disable-next-line no-magic-numbers\n      var isShort = function (middle) {\n        return middle < 3;\n      };\n\n      var rightOffset = topLeft > topRight && isShort(rightMiddle) ? 1 : 2;\n      var leftOffset;\n\n      if (topRight > topLeft) {\n        var defaultOffset = isShort(rightMiddle) ? leftMiddle : leftMiddle - 2;\n        leftOffset = isShort(leftMiddle) ? leftMiddle - 1 : defaultOffset;\n      } else {\n        var _defaultOffset = isShort(leftMiddle) ? 1 : 2;\n\n        leftOffset = isShort(rightMiddle) ? _defaultOffset : leftMiddle - 2;\n      }\n\n      moves = [].concat(_toConsumableArray(rightMoves.slice(0, rightOffset)), _toConsumableArray(leftMoves.slice(leftOffset)));\n      coords = [].concat(_toConsumableArray(rightCoords.slice(0, rightOffset)), _toConsumableArray(leftCoords.slice(leftOffset)));\n    }\n\n    var middle = moves.indexOf(\"L\");\n    var subMoves = moves.slice(0, middle);\n    var subCoords = coords.slice(0, middle);\n    return subMoves.map(function (m, i) {\n      return {\n        command: m,\n        coords: subCoords[i].split(\",\")\n      };\n    });\n  }; // eslint-disable-next-line max-statements\n\n\n  var getBottomPath = function () {\n    var bottomRight = cornerRadius.bottomRight,\n        bottomLeft = cornerRadius.bottomLeft;\n    var arcLength = r1 * Math.abs(end - start);\n\n    var _getPathData2 = getPathData(\"bottom\"),\n        rightMoves = _getPathData2.rightMoves,\n        rightCoords = _getPathData2.rightCoords,\n        rightMiddle = _getPathData2.rightMiddle,\n        leftMoves = _getPathData2.leftMoves,\n        leftCoords = _getPathData2.leftCoords,\n        leftMiddle = _getPathData2.leftMiddle;\n\n    var moves;\n    var coords;\n\n    if (bottomRight === bottomLeft || arcLength < 2 * bottomRight + 2 * bottomLeft) {\n      moves = bottomRight > bottomLeft ? rightMoves : leftMoves;\n      coords = bottomRight > bottomLeft ? rightCoords : leftCoords;\n    } else {\n      // eslint-disable-next-line no-magic-numbers\n      var isShort = function (m, middle) {\n        return m.length - middle < 4;\n      };\n\n      var shortPath = bottomRight > bottomLeft ? isShort(rightMoves, rightMiddle) : isShort(leftMoves, leftMiddle); // eslint-disable-next-line no-magic-numbers\n\n      var rightOffset = shortPath ? -1 : -3;\n      moves = [].concat(_toConsumableArray(leftMoves.slice(0, leftMiddle + 2)), _toConsumableArray(rightMoves.slice(rightOffset)));\n      coords = [].concat(_toConsumableArray(leftCoords.slice(0, leftMiddle + 2)), _toConsumableArray(rightCoords.slice(rightOffset)));\n    }\n\n    var middle = moves.indexOf(\"L\");\n    var subMoves = moves.slice(middle, -1);\n    var subCoords = coords.slice(middle, -1);\n    return subMoves.map(function (m, i) {\n      return {\n        command: m,\n        coords: subCoords[i].split(\",\")\n      };\n    });\n  };\n\n  var topPath = getTopPath();\n  var bottomPath = getBottomPath();\n  var moves = [].concat(_toConsumableArray(topPath), _toConsumableArray(bottomPath));\n  var path = moves.reduce(function (memo, move) {\n    memo += \"\".concat(move.command, \" \").concat(move.coords.join());\n    return memo;\n  }, \"\");\n  return \"\".concat(path, \" z\");\n};\nexport var getBarPath = function (props, width, cornerRadius) {\n  if (props.getPath) {\n    return getCustomBarPath(props, width);\n  }\n\n  return props.horizontal ? getHorizontalBarPath(props, width, cornerRadius) : getVerticalBarPath(props, width, cornerRadius);\n};\nexport var getPolarBarPath = function (props, cornerRadius) {\n  // TODO Radial bars\n  return getVerticalPolarBarPath(props, cornerRadius);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}